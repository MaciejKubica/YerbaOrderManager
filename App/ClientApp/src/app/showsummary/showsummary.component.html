<h1>Order summary</h1>
<div class="row">

  <div class="form-group">
    <label>Order id: </label> {{currentOrder?.id}}
  </div>

  <div class="form-group">
    <label>Order created:</label> {{currentOrder.created | date: 'dd-MM-yyyy HH:mm:ss'}}
  </div>

  <div class="form-group">
    <label>OrderDate: </label> {{currentOrder.orderDate | date: 'dd-MM-yyyy'}}
  </div>
  <div class="form-group">
    <label>Order executed by: </label> {{currentOrder.userExecutedBy.name}} {{currentOrder.userExecutedBy.email}}
  </div>
  <div class="form-group">
    <label>Order made by: </label> {{currentOrder.userMadeBy.name}} {{currentOrder.userMadeBy.email}}
  </div>

  <div class="form-group">
    <label>Total Quantity: </label> {{currentOrder.totalQuantity}}
  </div>

  <div class="form-group">
    <label>Total Cost: </label> {{currentOrder.totalCost | currency:'PLN':true:'2.2-4'}}
  </div>

  <br />
  <div class="form-group">
    <table class="table table-condensed table-hover">
      <thead>
        <tr>
          <th>User</th>
          <th>Yerba</th>
          <th>Quantity</th>          
          <th>Cost</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let orderItem of currentOrder.items">
          <td>{{ orderItem.userDetails.name }}</td>
          <td><a [href]="onGetYerba(orderItem.yerbaId).url" data-toggle="tooltip" [title]="onGetYerba(orderItem.yerbaId).description" target="blank">{{onGetYerba(orderItem.yerbaId).name}}</a></td>
          <td>{{ orderItem.quantity }}</td>          
          <td>{{ orderItem.cost  | currency:'PLN':true:'2.2-4' }}</td>
          <td>{{ orderItem.cost * orderItem.quantity  | currency:'PLN':true:'2.2-4' }}</td>
          <td>
            <button class="btn btn-success btn-sm" *ngIf="paimentReceived(orderItem)" (click)="confirmPaiment(orderItem)">Confirm payment</button>
            <button class="btn btn-warning btn-sm" *ngIf="paimentDone(orderItem)" disabled>Payment received</button>
            <button class="btn btn-danger btn-sm" *ngIf="paimentNotReceived(orderItem)" disabled>Payment not received</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="form-group" *ngIf="currentUser.id != currentOrder.madeby">
    <h2>Bill data:</h2>
    <div class="form-group">
      <label>Bank Account: </label> {{usertoPay?.bankAccount}}
    </div>
    <div class="form-group">
      <label>User: </label> {{usertoPay?.name}} [{{usertoPay?.email}}]
    </div>
    <div class="form-group">
      <label>Value: </label> {{calculatedBill | currency:'PLN':true:'2.2-4' }}
    </div>
  </div>

<div class="form-group" *ngIf="currentUser.id === currentOrder.madeby">
  <h2><label>Total Quantity: </label> {{currentOrder.totalQuantity}}</h2>
</div>

<div class="form-group" *ngIf="currentUser.id === currentOrder.madeby">
  <h2><label>Total Cost: </label> {{currentOrder.totalCost * currentOrder.totalQuantity | currency:'PLN':true:'2.2-4'}}</h2>
</div>

</div>
